# <!-- 시스템 설정 -->

# 시스템 설정

### CentOS의 x윈도 환경에서 제공하는 시스템의 설정명령을 사용하면 여러가지 시스템 설정으로 좀 더 편리하게 사용할 수 있다. 미리 몇가지를 살펴보자

## 표준 시간대 변경

### [설정]의 [자세히보기] -> [날짜 및 시각] 부분에서 표준 시간대를 변경할 수 있다.

## 네트워크 설정

### nmtui 명령어, 잠시후 네트워크 개념을 학습하고 자세히 다룬다

## 방화벽 설정

### firewall-config 명령어, 외부에 서비스하기위해 포트를 열 때 사용한다. 이 책 후반부에서 네트워크 서버를 구축할 때 자주 사용할 명령이다.

## 서비스(데몬) 설정

### ntsysv 명령어, 서비스(데몬)의 시작, 중지 , 재시작 및 사용 여부를 설정할 때 사용한다. 서비스(데몬)의 개념은 잠시 후에 다룬다.

### 먼저 dnf -y install ntsysv 명령으로 설치해야한다.

# <!-- CRON 과 AT -->

# CRON 과 AT

## CRON

### 독자가 시스템을 가장 적게 사용하는 새벽 5시에 백업해야 할 경우, 하루 이틀쯤은 퇴근하지 않고 기다릴 수 있겠지만 매일 그래야 한다면 아마도 회사를 그만두고 싶어질 것이다. 이런 경우 주기적으로 반복되는 일을 자동으로 실행할 수 있도록 시스템 작업을 예약해놓는 것은 cron이라 부른다.

### cron 과 관련된 데몬(서비스)는 crond 이고, 관련 파일은 /etc/crontab 이다

### /etc/crontab의 형식은 다음과 같다

분 시 일 월 요일 사용자 실행명령

### 분에는 0~59 , 시에는 0 ~ 23, 일에는 1 ~ 31 , 월에는 1 ~ 12 , 요일에는 0 ~ 6이 올 수 있다. 요일은 일요일부터 시작한다.

### 사용자는 명령을 실행할 사용자가, 실행 명령에는 그 시간에 실행할 명령이 들어올 수 있다.

### 간단한 예를 보면 다음과 같다.

00 05 1 \* \* root cp -r /home /backup

### 네번째인 월 부분에 입력한 *은 매월을 의미한다. 네번째 부터 거꾸로 읽으면 매월 1일 새벽 5시 00분에 실행한다. 요일 부분도 모든 요일을 의미하는 *로 표시했다.

### 사용자는 root의 권한이며 명령은 cp -r /home /backup 명령을 실행한다. /home 디렉터리 똥째로 /backup 디렉터리에 복사된다.

### 하나 더 기억할 사항은 cron의 경우 주기적으로 실행할 내용을 디렉터리에 넣어놓고 작동한다는 점이다.

### 해당 디렉터리 구조는 233쪽을 참조하자

[root@localhost etc]# find /etc -name 'cron\*'
| 파일 | 내용 |
| :------------------------------: | :----------------------------------------------------------------------: |
|/etc/crontab|상위 파일입니다. -rw-r--r--. 1 root root 451 5월 11 2019 crontab
|
|/etc/cron.hourly | 시간별|
|/etc/cron.daily |일별|
|/etc/cron.monthly|월별|
|/etc/cron.weekly|주별|

### /etc/crontab 파일이 시간별, 일별 , 주별 , 월별로 호출하는 디렉터리를 보여준다. 그래서 일반적으로 crontab 파일에는 다음과 같은 내용을 입력해 둘 수 있다.

### 그래서 일반적으로 crontab 파일에는 다음과 같은 내용을 입력해 둘 수 있다.

01 \* \* \* _ root run-parts /etc/cron.hourly
02 4 _ \* _ root run-parts /etc/cron.daily
02 4 _ _ 0 root run-parts /etc/cron.weekly
02 4 1 _ \* root run-parts /etc/cron.montly

### 첫줄은 매시간 1분에 /etc/cron.hourly 디렉터리 안의 명령들을 자동으로 실행한다. 나머지도 똑같다.

## 잠시 후 실습에서 더 자세히 살펴보자

## at

### cron은 주기적으로 반복되는 작업을 예약하는 것이지만, at 명령어는 일회성 작업을 예약하는 것과 같다. 즉 예약해두면 한번만 실행되고 소멸한다.

### 명령어 사용법은 다음과 같다.

### 예약 - at 시간

at 3:00am tomorrow - 내일 새벽 3시 <br>
at 11:00pm January 30 -> 1월 30일 오후 11시 <br>
at now +1 hours -> 1시간후

### at> 프롬프트에 예약 명령어 입력 후 enter를 누름

### 완료되면 ctrl + D 를 누름

### 확인 : at -l

### 취소 : atrm 작업번호


